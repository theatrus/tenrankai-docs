# Tenrankai Production Configuration for Marketing & Documentation Site
# 
# This configuration is optimized for production deployment.
# Copy to config.toml and adjust for your environment.

[server]
host = "0.0.0.0"  # Listen on all interfaces
port = 8080       # Common port for reverse proxy setups

[app]
log_level = "info"
name = "Tenrankai - High-Performance Photo Gallery Server"
# IMPORTANT: Generate strong secrets for production!
# Use: openssl rand -base64 32
download_secret = "CHANGE_ME_USE_OPENSSL_RAND_BASE64_32"
download_password = "CHANGE_ME_USE_STRONG_PASSWORD"
copyright_holder = "Tenrankai Project"
base_url = "https://tenrankai.com"

[templates]
directory = "/var/www/tenrankai/templates"

[static_files]
directory = "/var/www/tenrankai/static"

# Main demo gallery
[[galleries]]
name = "main"
url_prefix = "/gallery"
source_directory = "/var/www/tenrankai/photos"  # Absolute path recommended
cache_directory = "/var/www/tenrankai/cache/gallery"
images_per_page = 24
new_threshold_days = 30
pregenerate_cache = true  # Recommended for production
cache_refresh_interval_minutes = 360  # 6 hours
jpeg_quality = 85
webp_quality = 85.0
approximate_dates_for_public = false  # Full dates for demo purposes

gallery_template = "modules/gallery.html.liquid"
image_detail_template = "modules/image_detail.html.liquid"

[galleries.thumbnail]
width = 300
height = 300

[galleries.gallery_size]
width = 800
height = 800

[galleries.medium]
width = 1200
height = 1200

[galleries.large]
width = 1600
height = 1600

[galleries.preview]
max_images = 6
max_depth = 3
max_per_folder = 2

# Documentation
[[posts]]
name = "docs"
source_directory = "/var/www/tenrankai/posts/docs"
url_prefix = "/docs"
posts_per_page = 50  # Show more docs per page
refresh_interval_minutes = 60  # Check for updates hourly

posts_index_template = "modules/posts_index.html.liquid"
post_detail_template = "modules/post_detail.html.liquid"

# Blog
[[posts]]
name = "blog"
source_directory = "/var/www/tenrankai/posts/blog"
url_prefix = "/blog"
posts_per_page = 10
refresh_interval_minutes = 120  # Check every 2 hours

posts_index_template = "modules/posts_index.html.liquid"
post_detail_template = "modules/post_detail.html.liquid"

# Showcase galleries demonstrating different use cases
[[galleries]]
name = "showcase_portfolio"
url_prefix = "/showcase/portfolio"
source_directory = "/var/www/tenrankai/showcases/portfolio"
cache_directory = "/var/www/tenrankai/cache/showcase_portfolio"
images_per_page = 20
jpeg_quality = 90  # Higher quality for portfolio
webp_quality = 90.0
pregenerate_cache = true

[galleries.thumbnail]
width = 400
height = 400

[galleries.gallery_size]
width = 1000
height = 1000

[galleries.medium]
width = 1400
height = 1400

[[galleries]]
name = "showcase_events"
url_prefix = "/showcase/events"
source_directory = "/var/www/tenrankai/showcases/events"
cache_directory = "/var/www/tenrankai/cache/showcase_events"
images_per_page = 100  # More images for event galleries
new_threshold_days = 7  # Highlight recent event photos
pregenerate_cache = false  # Events might have many photos
approximate_dates_for_public = true  # Privacy: Show only month/year to public

# Production optimizations (these would be command line flags or env vars)
# Run with:
# RUST_LOG=info tenrankai --config config.production.toml
# 
# For systemd service:
# Environment="RUST_LOG=info"
# ExecStart=/usr/local/bin/tenrankai --config /etc/tenrankai/config.production.toml
#
# Recommended nginx configuration:
# location / {
#     proxy_pass http://127.0.0.1:8080;
#     proxy_set_header Host $host;
#     proxy_set_header X-Real-IP $remote_addr;
#     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#     proxy_set_header X-Forwarded-Proto $scheme;
#     
#     # Cache static assets
#     location ~* \.(jpg|jpeg|png|webp|gif|ico|css|js)$ {
#         expires 1y;
#         add_header Cache-Control "public, immutable";
#     }
# }

