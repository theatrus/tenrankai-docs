# Tenrankai Production Bootstrap Configuration
#
# This is the bootstrap configuration file for production deployment.
# Copy to config.toml and adjust for your environment.
#
# Site configuration is managed in config.production.d/
# Copy config.production.d/ to config.d/ when deploying.

[server]
host = "127.0.0.1"  # Bind to localhost for reverse proxy setups
port = 8091         # Common port for reverse proxy setups

[app]
log_level = "info"
name = "Tenrankai - High-Performance Photo Gallery CMS Server"
# ConfigStorage directory for site configuration
config_storage = "config.production.d"

# Email configuration for production (required for user registration)
[email]
provider = "null"  # Change to "ses" for Amazon SES in production
from_address = "noreply@tenrankai.com"
# from_name = "Tenrankai Gallery"  # Optional
# reply_to = "support@tenrankai.com"  # Optional

# For Amazon SES (when provider = "ses"):
# region = "us-east-1"  # Optional, defaults to AWS SDK default region
# Credentials are auto-discovered via AWS SDK provider chain:
# 1. Environment variables (AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
# 2. AWS credentials file (~/.aws/credentials)
# 3. IAM role credentials (EC2, ECS, Lambda)

# AI-Powered Image Analysis with OpenAI Vision (optional)
# Automatically generate keywords and alt-text for better SEO and accessibility
# [openai]
# api_key = "sk-your-openai-api-key"  # Required - use environment variable in production
# model = "gpt-5.2"                    # Default model for image analysis
# rate_limit_ms = 1000                 # Delay between API calls (respect rate limits)
# max_tokens = 300                     # Max response tokens per image
#
# # Background processing - automatically analyze new images
# enable_background_analysis = true    # Enable for production auto-processing
# background_interval_minutes = 60     # Check for new images hourly
# background_batch_size = 50           # Process up to 50 images per run

# Example systemd service file (save as /etc/systemd/system/tenrankai.service):
# [Unit]
# Description=Tenrankai Photo Gallery Server
# After=network.target
#
# [Service]
# Type=simple
# User=tenrankai
# Group=tenrankai
# WorkingDirectory=/srv/tenrankai/tenrankai-dot-com
# Environment="RUST_LOG=info"
# ExecStart=/srv/tenrankai/tenrankai/target/release/tenrankai
# Restart=always
# RestartSec=10
#
# [Install]
# WantedBy=multi-user.target

# Example nginx configuration:
# server {
#     listen 443 ssl http2;
#     server_name tenrankai.com;
#
#     ssl_certificate /etc/letsencrypt/live/tenrankai.com/fullchain.pem;
#     ssl_certificate_key /etc/letsencrypt/live/tenrankai.com/privkey.pem;
#
#     client_max_body_size 50M;  # For photo uploads if enabled
#
#     location / {
#         proxy_pass http://127.0.0.1:8091;
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#     }
# }
